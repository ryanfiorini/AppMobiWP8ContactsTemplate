<!DOCTYPE html><!--HTML5 doctype-->
<html>
<head>
<title>Your New Application</title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8"> 

<!-- If you use this the AppMobi.display.useViewport() will not work -->
<!-- <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> -->

<style type="text/css">
    /* Prevent copy paste for all elements except text fields and block touch actions */
    *  { -webkit-user-select:none; -webkit-tap-highlight-color:rgba(255, 255, 255, 0); -ms-touch-action:none; }
    input, textarea  { -webkit-user-select:text; }
    
    /* Set up the page with a default background image */
    body {
        background-color:#fff;
        color:#000;
        font-family:Arial;
        font-size:24pt;
        margin:0px;padding:0px;
        background-image:url('images/background.jpg');
    }
    #content {
        display: none;
    }

    /*  If you use this the AppMobi.display.useViewport wi not work
    @-ms-viewport { width: 480px; }
    @viewport { width: 480px; }*/
</style>

<script type="text/javascript" charset="utf-8" src="_appMobi/appmobi_local_bootstrap.js"></script> 
<script type="text/javascript" charset="utf-8" src="_appMobi/jq.desktopBrowsers.js"></script> 

<script type="text/javascript" charset="utf-8" src="_appMobi/window.js"></script> 

<script type="text/javascript">
/* This function runs once the page is loaded, but appMobi is not yet active */
var init = function(){
};
window.addEventListener("load",init,false);  

/* This code prevents users from dragging the page */
var preventDefaultScroll = function(event) {
    event.preventDefault();
    window.scroll(0,0);
    return false;
};
document.addEventListener('touchmove', preventDefaultScroll, false);

/* This code is used to run as soon as appMobi activates */
var onDeviceReady = function () {
    // *** console.log(""); to display messages in the Visual Studio Output Window. ***
    console.log("in onDeviceReady");

    var orientation = "portrait";  // portrait or landscape
    var portraitWidth = 320;
    var landscapeWidth = 480;

    AppMobi.device.setAutoRotate(false);
    //AppMobi.device.setRotateOrientation(orientation);
    AppMobi.display.useViewport(portraitWidth, landscapeWidth);

	//hide appMobi's plash screen not yours
	AppMobi.device.hideSplashScreen();	

	document.getElementById('splashScreen').style.display = "none";
	document.getElementById('content').style.display = "block";
};
document.addEventListener("appMobi.device.ready",onDeviceReady,false);    

var onOrientationChange = function () {
    console.log("in onOrientationChange");

    // do what you like here
};
document.addEventListener("appMobi.device.orientation.change", onOrientationChange, false);


function contactsReceived() {
    console.log("contactsReceived");

    var table = document.getElementById("contacts");
    table.innerHTML = '';

    var myContacts = AppMobi.contacts.getContactList();

    for (var i = 0; i < myContacts.length; i++) {
        //add row to table
        var contactInfo = AppMobi.contacts.getContactData(myContacts[i]);
        var tr = document.createElement("tr");
        tr.setAttribute('id', 'pnid' + contactInfo.id);
        tr.setAttribute('onClick', 'document.getElementById("iden").value = ' + contactInfo.id + ';');
        tr.setAttribute('style', 'background-color:#B8BFD8');
        var id = document.createElement("td");
        id.innerHTML = contactInfo.id;
        tr.appendChild(id);
        var msg = document.createElement("td");
        msg.innerHTML = contactInfo.name;
        tr.appendChild(msg);
        table.appendChild(tr);
    }
}
document.addEventListener('appMobi.contacts.get', contactsReceived, false);

function onContactAdded(evt) {
    if (evt.success == true) {
        alert("Contact " + evt.contactid + " successfully added");
    }
    else if (evt.cancelled == true) {
        alert("Add Contact Cancelled");
    }
}
document.addEventListener('appMobi.contacts.add', onContactAdded);

function getContacts() {
    console.log("getContacts 1");
    AppMobi.contacts.getContacts();
    console.log("getContacts 2");
}
function addContact() {
    var first="Jane";
    var last = "Doe_" + Math.floor(Math.random() * 999999);
    var street = "1234 high st.";
    var city = "philadelphia";
    var state = "PA";
    var zip = "19081";
    var country = "USA";
    var phone = "215-555-1212";
    var email = first + "." + last + "@hotmail.com";
    AppMobi.contacts.addContact("appMobi_"+last, first, last, street, city, state, zip, country, phone, email);
}

</script>

</head>
<body>
    <div id="splashScreen">
        LOADING...
    </div>
    <div id="content">
        <!-- Your app content goes here -->
        <br /> 
        appMobi Contacts Tutorial.<br /><br />
        <button onclick="getContacts();">Get All Contacts</button><br />
        <button onclick="addContact();">Add Contacts</button><br /><br />

        <h1>Contacts</h1>
        <table id="contacts"></table>

    </div>
</body>
</html>
